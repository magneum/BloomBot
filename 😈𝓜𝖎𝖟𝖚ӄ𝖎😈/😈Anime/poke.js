// âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
const { MessageType, Mimetype } = require(`@adiwajshing/baileys`);
const ffmpegInstaller = require("@ffmpeg-installer/ffmpeg");
const ffprobe = require("@ffprobe-installer/ffprobe");
const ffmpeg = require("fluent-ffmpeg")()
  .setFfprobePath(ffprobe.path)
  .setFfmpegPath(ffmpegInstaller.path);
const _ğ”ğ”ğ”Ÿ_ = require(`../../ğŸ§€ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ§€/_ğ”ğ”ğ”Ÿ_`);
const â„“Î¹Ñ”Î·Ñ‚ = require(`../../ğŸ§€ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ§€/catch`);
var á´‹á´‡Éªá´‡x = new RegExp(_ğ”ğ”ğ”Ÿ_.FOXTROT, `g`);
var á´‹á´‡Éª = /\/\^\[(.*)+\]\/\g/g.exec(á´‹á´‡Éªá´‡x)[1];
const Downloader = require(`nodejs-file-downloader`);
const anime = require(`anime-actions`);
const fs = require(`fs`);
`ğŸ™`;
`ğŸ™`;
`ğŸ™============================================================================================================================<âš¡>`;
`   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   ğŸ’¡ğ˜ˆğ˜¥ğ˜·ğ˜¢ğ˜¯ğ˜¤ğ˜¦ ğ˜ğ˜©ğ˜¢ğ˜µğ˜´ğ˜¢ğ˜±ğ˜± ğ˜œğ˜´ğ˜¦ğ˜³ğ˜£ğ˜°ğ˜µ ğ˜ğ˜ªğ˜µğ˜© 80+ ğ˜Šğ˜°ğ˜®ğ˜®ğ˜¢ğ˜¯ğ˜¥ğ˜´ ğ˜§ğ˜°ğ˜³ ğ˜£ğ˜°ğ˜µğ˜© ğ˜—ğ˜³ğ˜ªğ˜·ğ˜¢ğ˜µğ˜¦ ğ˜¢ğ˜¯ğ˜¥ ğ˜—ğ˜¶ğ˜£ğ˜­ğ˜ªğ˜¤.. `;
`ğŸ™============================================================================================================================<âš¡>`;
`ğŸ™`;
`ğŸ™`;
module.exports = {
  name: `poke`,
  async handle(Ó„Ê€ÇŸÓ„É¨Õ¼Ê, chat, ğ“œğ–ğ–Ÿğ–šÓ„ğ–, arg, ğ“œğ“²ğ”ƒğ“¾ğ“´ğ“²ğ“¢ğ“²ğ“½ğ“»ğ“®ğ“¹) {
    try {
      // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
      if (ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isReply) {
        var êœ±á´‡É´á´…á´‡Ê€Éªá´… = ğ“œğ–ğ–Ÿğ–šÓ„ğ–.sender;
        var êœ±á´‡É´á´…á´‡Ê€eceived = êœ±á´‡É´á´…á´‡Ê€Éªá´….substring(0, êœ±á´‡É´á´…á´‡Ê€Éªá´….length - 15);
        var Receiver = chat.message.extendedTextMessage.contextInfo.participant;
        personreceived = Receiver.substring(0, Receiver.length - 15);
      }
      var êœ±á´‡É´á´…á´‡Ê€Éªá´… = ğ“œğ–ğ–Ÿğ–šÓ„ğ–.sender;
      var êœ±á´‡É´á´…á´‡Ê€eceived = êœ±á´‡É´á´…á´‡Ê€Éªá´….substring(0, êœ±á´‡É´á´…á´‡Ê€Éªá´….length - 15);
      const defaultnm = ğ“œğ–ğ–Ÿğ–šÓ„ğ–.commandName;
      const FinalName = defaultnm.charAt(0).toUpperCase() + defaultnm.slice(1);
      console.log("ğ“ğ¨ğ©ğ¢ğœ: " + FinalName);
      // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
      const link = await anime.poke();
      console.log(link);
      const downloader = await new Downloader({
        url: link,
        directory: `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸`,
        fileName: `${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`,
        cloneFiles: false,
      });
      try {
        await downloader.download();
      } catch (â„“Î±Ğ²Ñ”ÑÑÏƒÑ) {
        â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, Ó„Ê€ÇŸÓ„É¨Õ¼Ê, ğ“œğ–ğ–Ÿğ–šÓ„ğ–);
      }
      // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
      if (ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isReply) {
        await ffmpeg
          .input(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`)
          .outputOptions([
            "-pix_fmt yuv420p",
            "-c:v libx264",
            "-movflags +faststart",
            "-filter:v crop='floor(in_w/2)*2:floor(in_h/2)*2'",
          ])
          .noAudio()
          .output(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`)
          .on("end", async () => {
            console.log("Finished");
            await Ó„Ê€ÇŸÓ„É¨Õ¼Ê
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                fs.readFileSync(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`),
                MessageType.video,
                {
                  contextInfo: { mentionedJid: [êœ±á´‡É´á´…á´‡Ê€Éªá´…, Receiver] },
                  quoted: chat,
                  mimetype: "video/gif",
                  caption: `_ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢_
                  
â”Œâ”€â”€â”€â”€â­“ 
â”‚âš¡ ğ“ğ¨ğ©ğ¢ğœ: *${FinalName}*
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â­“

@${êœ±á´‡É´á´…á´‡Ê€eceived} poked @${personreceived}!

ğŸ”—ğ‹ğ¢ğ§ğ¤: ${link}`,
                }
              )
              .then(async () => {
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`
                );
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`
                );
              })
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, Ó„Ê€ÇŸÓ„É¨Õ¼Ê, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
          })
          .on("error", (e) => console.log(e))
          .run();
        // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
      } else if (!ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isReply) {
        await ffmpeg
          .input(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`)
          .outputOptions([
            "-pix_fmt yuv420p",
            "-c:v libx264",
            "-movflags +faststart",
            "-filter:v crop='floor(in_w/2)*2:floor(in_h/2)*2'",
          ])
          .noAudio()
          .output(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`)
          .on("end", async () => {
            console.log("Finished");
            await Ó„Ê€ÇŸÓ„É¨Õ¼Ê
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                fs.readFileSync(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`),
                MessageType.video,
                {
                  contextInfo: { mentionedJid: [êœ±á´‡É´á´…á´‡Ê€Éªá´…] },
                  quoted: chat,
                  mimetype: "video/gif",
                  caption: `_ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢_
                  
â”Œâ”€â”€â”€â”€â­“ 
â”‚âš¡ ğ“ğ¨ğ©ğ¢ğœ: *${FinalName}*
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â­“

@${êœ±á´‡É´á´…á´‡Ê€eceived} is poking!

ğŸ”—ğ‹ğ¢ğ§ğ¤: ${link}`,
                }
              )
              .then(async () => {
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`
                );
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`
                );
              })
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, Ó„Ê€ÇŸÓ„É¨Õ¼Ê, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
          })
          .on("error", (e) => console.log(e))
          .run();
        // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
      } else {
        await ffmpeg
          .input(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`)
          .outputOptions([
            "-pix_fmt yuv420p",
            "-c:v libx264",
            "-movflags +faststart",
            "-filter:v crop='floor(in_w/2)*2:floor(in_h/2)*2'",
          ])
          .noAudio()
          .output(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`)
          .on("end", async () => {
            console.log("Finished");
            await Ó„Ê€ÇŸÓ„É¨Õ¼Ê
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                fs.readFileSync(`./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`),
                MessageType.video,
                {
                  contextInfo: { mentionedJid: [êœ±á´‡É´á´…á´‡Ê€Éªá´…] },
                  quoted: chat,
                  mimetype: "video/gif",
                  caption: `_ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢_
                  
â”Œâ”€â”€â”€â”€â­“ 
â”‚âš¡ ğ“ğ¨ğ©ğ¢ğœ: *${FinalName}*
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â­“

ğŸ”—ğ‹ğ¢ğ§ğ¤: ${link}`,
                }
              )
              .then(async () => {
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.gif`
                );
                await fs.unlinkSync(
                  `./ğŸ—‘ï¸ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ—‘ï¸/${FinalName}_${êœ±á´‡É´á´…á´‡Ê€eceived}.mp4`
                );
              })
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, Ó„Ê€ÇŸÓ„É¨Õ¼Ê, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
          })
          .on("error", (e) => console.log(e))
          .run();
      }
      // âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
    } catch (â„“Î±Ğ²Ñ”ÑÑÏƒÑ) {
      â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, Ó„Ê€ÇŸÓ„É¨Õ¼Ê, ğ“œğ–ğ–Ÿğ–šÓ„ğ–);
      console.log(â„“Î±Ğ²Ñ”ÑÑÏƒÑ);
    }
  },
};
// âš¡â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢â”€â”€â”€â”€â”€â”€[]  ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   []â”€â”€â”€â”€â”€â”€â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢=â€¢âš¡
