// â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
const { MessageType, Mimetype } = require(`@adiwajshing/baileys`);
const â„“Î¹Ñ”Î·Ñ‚ = require(`../../ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ§€ğ“’ğ“»ğ“ªğ“½ğ“®/catch`);
const _ğ”ğ”ğ”Ÿ_ = require(`../../ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ§€ğ“’ğ“»ğ“ªğ“½ğ“®/_ğ”ğ”ğ”Ÿ_`);
const Greetings = require(`../../ğ“œğ–ğ–Ÿğ–šÓ„ğ–ğŸ§€ğ“’ğ“»ğ“ªğ“½ğ“®/É É ğ“œğ–ğ–Ÿğ–šÓ„ğ–`);
var á´‹á´‡Éªá´‡x = new RegExp(_ğ”ğ”ğ”Ÿ_.FOXTROT, `g`);
var á´‹á´‡Éª = /\/\^\[(.*)+\]\/\g/g.exec(á´‹á´‡Éªá´‡x)[1];
// â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
module.exports = {
  name: `setwelcome`,
  description: `New members of a group chat will be welcomed with a message.`,
  ğ“œğ“®ğ“®6ÊÖ…Ê€É›: ` 
*${á´‹á´‡Éª}setwelcome <message>
*${á´‹á´‡Éª}setwelcome*  <off>  
*${á´‹á´‡Éª}setwelcome*  <delete>
Do note, the setwelcome option is still enabled after you use the delete option.`,
  async handle(ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, chat, ğ“œğ–ğ–Ÿğ–šÓ„ğ–, arg, ğ“œğ“²ğ”ƒğ“¾ğ“´ğ“²ğ“¢ğ“²ğ“½ğ“»ğ“®ğ“¹) {
    try {
      // â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
      const á´Éªá´¢á´œá´‹ÉªÉ¢Éªá´› = require(`simple-git`)();
      await á´Éªá´¢á´œá´‹ÉªÉ¢Éªá´›.fetch();
      var êœ±á´‡É´á´…á´‡Ê€Éªá´… = ğ“œğ–ğ–Ÿğ–šÓ„ğ–.sender;
      var ğ“¢ğ“®ğ“·ğ“­ğ“®ğ“»ğ“’ğ“¸ğ“·ğ“¯ğ“²ğ“° = êœ±á´‡É´á´…á´‡Ê€Éªá´….substring(0, êœ±á´‡É´á´…á´‡Ê€Éªá´….length - 15);
      var ğ™µğšğšğšŒğš‘ğ™¼ğš’ğš£ğšğš”ğš’ğ™½ğšğšœğšœ = await á´Éªá´¢á´œá´‹ÉªÉ¢Éªá´›.log([
        `KrakinzLab..origin/KrakinzLab`,
      ]);
      // â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
      if (ğ™µğšğšğšŒğš‘ğ™¼ğš’ğš£ğšğš”ğš’ğ™½ğšğšœğšœ.total != 0) {
        await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
          .sendMessage(
            ğ“œğ–ğ–Ÿğ–šÓ„ğ–.logGroup,
            `_Â© ğŒğ¢ğ³ğ®ğ¤ğ¢ ğğ¨ğ­_

ğ™ğ™¥ğ™™ğ™–ğ™©ğ™šğŸ¤–ğ™‹ğ™šğ™£ğ™™ğ™ğ™£ğ™œ
*â€¢ğ˜—ğ˜­ğ˜¦ğ˜¢ğ˜´ğ˜¦ ğ˜œğ˜±ğ˜¥ğ˜¢ğ˜µğ˜¦ ğ˜œğ˜´ğ˜ªğ˜¯ğ˜¨ *${á´‹á´‡Éª}update* ğ˜°ğ˜³ ğ˜³ğ˜¦ğ˜¥ğ˜¦ğ˜±ğ˜­ğ˜°ğ˜º ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢!`,
            MessageType.text,
            { quoted: chat }
          )
          .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
      }
      // â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
      if (ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId === `120363025343298860@g.us` && !ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isSenderSUDO) {
        await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
          .sendMessage(
            ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
            `_Â© ğŒğ¢ğ³ğ®ğ¤ğ¢ ğğ¨ğ­_

ğ—”ğ—µğ—º â€¢@${ğ“¢ğ“®ğ“·ğ“­ğ“®ğ“»ğ“’ğ“¸ğ“·ğ“¯ğ“²ğ“°},
ã‚·ï¸ğ†ğ«ğ¨ğ®ğ©ğŸ‘“${_ğ”ğ”ğ”Ÿ_.HASH}`,
            MessageType.text,
            {
              quoted: chat,
              contextInfo: {
                mentionedJid: [êœ±á´‡É´á´…á´‡Ê€Éªá´…],
              },
            }
          )
          .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
        return;
      }
      // â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
      if (ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isGroup && !ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isSenderGroupAdmin) {
        return await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
          .sendMessage(
            ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
            {
              url: _ğ”ğ”ğ”Ÿ_.ERROR,
            },
            MessageType.image,
            {
              quoted: chat,
              mimetype: Mimetype.png,
              caption: `
âš ï¸ğ—˜ğ—¿ğ—¿ğ—¼ğ—¿: @${ğ“¢ğ“®ğ“·ğ“­ğ“®ğ“»ğ“’ğ“¸ğ“·ğ“¯ğ“²ğ“°}, *Êá´á´œ á´…á´É´'á´› êœ±á´‡á´‡á´ á´›á´ Ê™á´‡ á´€á´…á´ÉªÉ´..*`,
            }
          )
          .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
      }
      // â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
      if (!ğ“œğ–ğ–Ÿğ–šÓ„ğ–.isGroup) {
        ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
          .sendMessage(
            ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
            `This command is only applicable in a group chat.`,
            MessageType.text,
            { quoted: chat }
          )
          .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
        return;
      }
      var Msg = await Greetings.getMessage(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, `setwelcome`);
      if (arg.length == 0) {
        var enabled = await Greetings.checkSettings(
          ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
          `setwelcome`
        );
        try {
          if (enabled === false || enabled === undefined) {
            ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Set a setwelcome message first.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          } else if (enabled === `OFF`) {
            ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Greetings are enabled: False \nCurrently greeting new members with:`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, Msg.message, MessageType.text, {
                quoted: chat,
              })
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          }

          ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
            .sendMessage(
              ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
              `Greetings are enabled: True \nCurrently greeting new members with:`,
              MessageType.text,
              { quoted: chat }
            )
            .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
              â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
            });
          ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
            .sendMessage(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, Msg.message, MessageType.text, {
              quoted: chat,
            })
            .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
              â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
            });
        } catch (â„“Î±Ğ²Ñ”ÑÑÏƒÑ) {
          throw â„“Î±Ğ²Ñ”ÑÑÏƒÑ;
        }
      } else {
        try {
          if (arg[0] === `OFF` || arg[0] === `off` || arg[0] === `Off`) {
            switched = `OFF`;
            await Greetings.changeSettings(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, switched);
            ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Welcome message has been disabled.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          }
          if (arg[0] === `ON` || arg[0] === `on` || arg[0] === `On`) {
            switched = `ON`;
            await Greetings.changeSettings(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, switched);
            ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Welcome message has been enabled.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          }
          if (arg[0] === `delete`) {
            var Msg = await Greetings.deleteMessage(
              ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
              `setwelcome`
            );
            if (Msg === false || Msg === undefined) {
              ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
                .sendMessage(
                  ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                  `Set a setwelcome message first.`,
                  MessageType.text,
                  { quoted: chat }
                )
                .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                  â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
                });
              return;
            }

            await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Welcome message deleted.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          }
          text = ğ“œğ–ğ–Ÿğ–šÓ„ğ–.body.replace(
            ğ“œğ–ğ–Ÿğ–šÓ„ğ–.body[0] + ğ“œğ–ğ–Ÿğ–šÓ„ğ–.commandName + ` `,
            ``
          );
          if (Msg === false || Msg === undefined) {
            await Greetings.setWelcome(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, text);
            await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Welcome message updated and enabled.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          } else {
            await Greetings.deleteMessage(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, `setwelcome`);
            await Greetings.setWelcome(ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId, text);
            await ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ
              .sendMessage(
                ğ“œğ–ğ–Ÿğ–šÓ„ğ–.chatId,
                `Welcome message updated and enabled.`,
                MessageType.text,
                { quoted: chat }
              )
              .catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ) => {
                â„“Î¹Ñ”Î·Ñ‚.catch((â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–));
              });
            return;
          }
        } catch (â„“Î±Ğ²Ñ”ÑÑÏƒÑ) {
          throw â„“Î±Ğ²Ñ”ÑÑÏƒÑ;
        }
      }
    } catch (â„“Î±Ğ²Ñ”ÑÑÏƒÑ) {
      â„“Î¹Ñ”Î·Ñ‚.catch(â„“Î±Ğ²Ñ”ÑÑÏƒÑ, ğ“šğ“»ğ“ªğ“´ğ“²ğ“·ğ”ƒ, ğ“œğ–ğ–Ÿğ–šÓ„ğ–);
      console.log(â„“Î±Ğ²Ñ”ÑÑÏƒÑ);
    }
  },
};
// â¦¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦¿   ğŒğ¢ğ³ğ®ğ¤ğ¢â„¢   â¦¿-----------------â¬¡==================â¬¡`;
